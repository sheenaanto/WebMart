{% load static %}

<nav class="navbar navbar-expand-sm navbar-light bg-white border-bottom">
  <div class="container">
    <!-- Mobile Toggle -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarTop"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarTop">
      <!-- Left -->
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a href="#" class="nav-link">English</a></li>
        <li class="nav-item"><a href="#" class="nav-link">GBP</a></li>
      </ul>

      <!-- Right -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="#" class="nav-link">
            <i class="bi bi-envelope-fill me-1"></i> customer_care@webmart.com
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link">
            <i class="bi bi-telephone-fill me-1"></i> +44 123456789
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="header-main border-bottom py-3">
  <div class="container">
    <div class="row align-items-center gy-3">
      <!-- Logo -->
      <div class="col-sm-4 col-md-3 col-lg-2">
        <a href="{% url 'home' %}" class="navbar-brand">
          <img
            src="{% static 'images/logo.png' %}"
            class="img-fluid"
            alt="Logo"
          />
        </a>
      </div>

      <!-- Categories -->
      <div class="col-sm-4 col-md-3 col-lg-2">
        <div class="dropdown">
          <button
            class="btn btn-primary dropdown-toggle w-100"
            data-bs-toggle="dropdown"
          >
            <i class="bi bi-list me-1"></i> Categories
          </button>

          <ul class="dropdown-menu w-100">
            <li>
              <a class="dropdown-item" href="{% url 'store' %}">All Products</a>
            </li>
            {% for category in links %}
            <li>
              <a class="dropdown-item" href="{{ category.get_url }}"
                >{{ category.category_name }}</a
              >
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>

      <!-- Store Button -->
      <div class="col-sm-4 col-md-2 col-lg-2 order-md-3 order-lg-0">
        <a
          href="{% url 'store' %}"
          class="btn btn-outline-primary w-100 w-md-50"
          >Store</a
        >
      </div>

      <!-- Search -->
      <div class="col-sm-6 col-md-4 col-lg-3 order-md-4 order-lg-0">
        <form action="{% url 'search' %}" method="GET">
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              placeholder="Search"
              name="keyword"
            />
            <button class="btn btn-primary">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- User + Cart -->
      <div class="col-sm-6 col-md-12 col-lg-3 order-md-5 order-lg-0">
        <div class="d-flex justify-content-end align-items-center">
          {% if user.id is None %}
          <div class="me-3 text-end">
            <small class="text-muted">Welcome Guest!</small>
            <div>
              <a href="{% url 'login' %}">Sign in</a> |
              <a href="{% url 'register' %}">Register</a>
            </div>
          </div>
          {% else %}
          <div class="me-3 text-end">
            <small class="text-muted"
              >Welcome {{ user.first_name|capfirst }}!</small
            >
            <div>
              <a href="{% url 'dashboard' %}">Dashboard</a> |
              <a href="{% url 'logout' %}">Logout</a>
            </div>
          </div>
          {% endif %}

          <!-- Cart -->
          <a href="{% url 'storecart' %}" class="position-relative">
            <div
              class="rounded-circle border p-3 d-flex justify-content-center align-items-center"
            >
              <i class="fa fa-shopping-cart"></i>
            </div>
            <span
              class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle"
            >
              {{ cart_count }}
            </span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
