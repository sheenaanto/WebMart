{% extends "base.html" %} {% load static %} {% block content %}

<section class="section-content padding-y bg">
  <div class="container">
    <form method="POST" action="{% url 'add_cart' single_product.id %}">
      {% csrf_token %}

      <div class="card">
        <div class="row g-0">
          <!-- LEFT: Product Image -->
          <aside class="col-md-6">
            <article class="gallery-wrap">
              <div class="img-big-wrap text-center p-3">
                <a href="#">
                  <img
                    src="{{ single_product.images.url }}"
                    class="img-fluid rounded"
                  />
                </a>
              </div>
            </article>
          </aside>

          <!-- RIGHT: Product Info -->
          <div class="col-md-6 border-start">
            <!-- border-left → border-start -->
            <article class="content-body p-4">
              <h2 class="title">{{ single_product.product_name }}</h2>

              <div class="mb-3">
                <var class="price h4">£{{ single_product.price }}</var>
              </div>

              <p>{{ single_product.description }}</p>

              <hr />

              <!-- COLOR SELECT -->
              <div class="mb-3 w-50">
                <h6>Choose Color</h6>
                <select name="color" class="form-select">
                  <option value="" disabled selected>Select</option>
                  {% for i in single_product.variation_set.colors %}
                  <option value="{{ i.variation_value }}">
                    {{ i.variation_value }}
                  </option>
                  {% endfor %}
                </select>
              </div>

              <!-- SIZE SELECT -->
              <div class="mb-3 w-50">
                <h6>Select Size</h6>
                <select name="size" class="form-select">
                  <option value="" disabled selected>Select</option>
                  {% for i in single_product.variation_set.sizes %}
                  <option value="{{ i.variation_value }}">
                    {{ i.variation_value }}
                  </option>
                  {% endfor %}
                </select>
              </div>

              <hr />

              <!-- STOCK + CART BUTTONS -->
              {% if single_product.stock <= 0 %}
              <h3 class="text-danger">Out of Stock</h3>

              {% else %} {% if in_cart %}
              <a href="#" class="btn btn-success me-2">
                Added to Cart <i class="fas fa-check"></i>
              </a>

              <a href="{% url 'storecart' %}" class="btn btn-outline-primary">
                Go to Cart <i class="fas fa-eye"></i>
              </a>

              {% else %}
              <button type="submit" class="btn btn-primary">
                Add to cart <i class="fas fa-shopping-cart ms-1"></i>
              </button>
              {% endif %} {% endif %}
            </article>
          </div>
        </div>
      </div>
    </form>

    <br />
  </div>
</section>

{% endblock %}
